{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/core/components/keep-alive.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/core/components/keep-alive.js","mtime":1596624957532},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwoKLyogICAgICAgKi8KaW1wb3J0IHsgaXNSZWdFeHAsIHJlbW92ZSB9IGZyb20gJy4uLy4uL3NoYXJlZC91dGlsJzsKaW1wb3J0IHsgZ2V0Rmlyc3RDb21wb25lbnRDaGlsZCB9IGZyb20gJy4uLy4uL2NvcmUvdmRvbS9oZWxwZXJzL2luZGV4JzsKCmZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUob3B0cykgewogIHJldHVybiBvcHRzICYmIChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnKTsKfQoKZnVuY3Rpb24gbWF0Y2hlcyhwYXR0ZXJuLCBuYW1lKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHsKICAgIHJldHVybiBwYXR0ZXJuLmluZGV4T2YobmFtZSkgPiAtMTsKICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykgewogICAgcmV0dXJuIHBhdHRlcm4uc3BsaXQoJywnKS5pbmRleE9mKG5hbWUpID4gLTE7CiAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkgewogICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKTsKICB9CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gcHJ1bmVDYWNoZShrZWVwQWxpdmVJbnN0YW5jZSwgZmlsdGVyKSB7CiAgdmFyIGNhY2hlID0ga2VlcEFsaXZlSW5zdGFuY2UuY2FjaGUsCiAgICAgIGtleXMgPSBrZWVwQWxpdmVJbnN0YW5jZS5rZXlzLAogICAgICBfdm5vZGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5fdm5vZGU7CgogIGZvciAodmFyIGtleSBpbiBjYWNoZSkgewogICAgdmFyIGNhY2hlZE5vZGUgPSBjYWNoZVtrZXldOwoKICAgIGlmIChjYWNoZWROb2RlKSB7CiAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjYWNoZWROb2RlLmNvbXBvbmVudE9wdGlvbnMpOwoKICAgICAgaWYgKG5hbWUgJiYgIWZpbHRlcihuYW1lKSkgewogICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpOwogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleSwga2V5cywgY3VycmVudCkgewogIHZhciBjYWNoZWQgPSBjYWNoZVtrZXldOwoKICBpZiAoY2FjaGVkICYmICghY3VycmVudCB8fCBjYWNoZWQudGFnICE9PSBjdXJyZW50LnRhZykpIHsKICAgIGNhY2hlZC5jb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpOwogIH0KCiAgY2FjaGVba2V5XSA9IG51bGw7CiAgcmVtb3ZlKGtleXMsIGtleSk7Cn0KCnZhciBwYXR0ZXJuVHlwZXMgPSBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdrZWVwLWFsaXZlJywKICBhYnN0cmFjdDogdHJ1ZSwKICBwcm9wczogewogICAgaW5jbHVkZTogcGF0dGVyblR5cGVzLAogICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLAogICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICB0aGlzLmtleXMgPSBbXTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHsKICAgICAgcHJ1bmVDYWNoZUVudHJ5KHRoaXMuY2FjaGUsIGtleSwgdGhpcy5rZXlzKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJHdhdGNoKCdpbmNsdWRlJywgZnVuY3Rpb24gKHZhbCkgewogICAgICBwcnVuZUNhY2hlKF90aGlzLCBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiR3YXRjaCgnZXhjbHVkZScsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcHJ1bmVDYWNoZShfdGhpcywgZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gIW1hdGNoZXModmFsLCBuYW1lKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgdmFyIHNsb3QgPSB0aGlzLiRzbG90cy5kZWZhdWx0OwogICAgdmFyIHZub2RlID0gZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChzbG90KTsKICAgIHZhciBjb21wb25lbnRPcHRpb25zID0gdm5vZGUgJiYgdm5vZGUuY29tcG9uZW50T3B0aW9uczsKCiAgICBpZiAoY29tcG9uZW50T3B0aW9ucykgewogICAgICAvLyBjaGVjayBwYXR0ZXJuCiAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnRPcHRpb25zKTsKICAgICAgdmFyIGluY2x1ZGUgPSB0aGlzLmluY2x1ZGUsCiAgICAgICAgICBleGNsdWRlID0gdGhpcy5leGNsdWRlOwoKICAgICAgaWYgKCAvLyBub3QgaW5jbHVkZWQKICAgICAgaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpIHx8IC8vIGV4Y2x1ZGVkCiAgICAgIGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKSB7CiAgICAgICAgcmV0dXJuIHZub2RlOwogICAgICB9CgogICAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlLAogICAgICAgICAga2V5cyA9IHRoaXMua2V5czsKICAgICAgdmFyIGtleSA9IHZub2RlLmtleSA9PSBudWxsIC8vIHNhbWUgY29uc3RydWN0b3IgbWF5IGdldCByZWdpc3RlcmVkIGFzIGRpZmZlcmVudCBsb2NhbCBjb21wb25lbnRzCiAgICAgIC8vIHNvIGNpZCBhbG9uZSBpcyBub3QgZW5vdWdoICgjMzI2OSkKICAgICAgPyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkICsgKGNvbXBvbmVudE9wdGlvbnMudGFnID8gIjo6Ii5jb25jYXQoY29tcG9uZW50T3B0aW9ucy50YWcpIDogJycpIDogdm5vZGUua2V5OwoKICAgICAgaWYgKGNhY2hlW2tleV0pIHsKICAgICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNhY2hlW2tleV0uY29tcG9uZW50SW5zdGFuY2U7IC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3QKCiAgICAgICAgcmVtb3ZlKGtleXMsIGtleSk7CiAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FjaGVba2V5XSA9IHZub2RlOwogICAgICAgIGtleXMucHVzaChrZXkpOyAvLyBwcnVuZSBvbGRlc3QgZW50cnkKCiAgICAgICAgaWYgKHRoaXMubWF4ICYmIGtleXMubGVuZ3RoID4gcGFyc2VJbnQodGhpcy5tYXgpKSB7CiAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleXNbMF0sIGtleXMsIHRoaXMuX3Zub2RlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlID0gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gdm5vZGUgfHwgc2xvdCAmJiBzbG90WzBdOwogIH0KfTs="},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/core/components/keep-alive.js"],"names":["isRegExp","remove","getFirstComponentChild","getComponentName","opts","Ctor","options","name","tag","matches","pattern","Array","isArray","indexOf","split","test","pruneCache","keepAliveInstance","filter","cache","keys","_vnode","key","cachedNode","componentOptions","pruneCacheEntry","current","cached","componentInstance","$destroy","patternTypes","String","RegExp","abstract","props","include","exclude","max","Number","created","Object","create","destroyed","mounted","$watch","val","render","slot","$slots","default","vnode","cid","push","length","parseInt","data","keepAlive"],"mappings":"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","sourcesContent":["/*       */\n\nimport {isRegExp, remove} from '../../shared/util'\nimport {getFirstComponentChild} from '../../core/vdom/helpers/index'\n\n\nfunction getComponentName(opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches(pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache(keepAliveInstance, filter) {\n  const {cache, keys, _vnode} = keepAliveInstance\n  for (const key in cache) {\n    const cachedNode = cache[key]\n    if (cachedNode) {\n      const name = getComponentName(cachedNode.componentOptions)\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode)\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry(\n  cache,\n  key,\n  keys,\n  current\n) {\n  const cached = cache[key]\n  if (cached && (!current || cached.tag !== current.tag)) {\n    cached.componentInstance.$destroy()\n  }\n  cache[key] = null\n  remove(keys, key)\n}\n\nconst patternTypes = [String, RegExp, Array]\n\nexport default {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  created() {\n    this.cache = Object.create(null)\n    this.keys = []\n  },\n\n  destroyed() {\n    for (const key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys)\n    }\n  },\n\n  mounted() {\n    this.$watch('include', val => {\n      pruneCache(this, name => matches(val, name))\n    })\n    this.$watch('exclude', val => {\n      pruneCache(this, name => !matches(val, name))\n    })\n  },\n\n  render() {\n    const slot = this.$slots.default\n    const vnode = getFirstComponentChild(slot)\n    const componentOptions = vnode && vnode.componentOptions\n    if (componentOptions) {\n      // check pattern\n      const name = getComponentName(componentOptions)\n      const {include, exclude} = this\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      const {cache, keys} = this\n      const key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? `::${componentOptions.tag}` : '')\n        : vnode.key\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance\n        // make current key freshest\n        remove(keys, key)\n        keys.push(key)\n      } else {\n        cache[key] = vnode\n        keys.push(key)\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode)\n        }\n      }\n\n      vnode.data.keepAlive = true\n    }\n    return vnode || (slot && slot[0])\n  }\n}\n"]}]}