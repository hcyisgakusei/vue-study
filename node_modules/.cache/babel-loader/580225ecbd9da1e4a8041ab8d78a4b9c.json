{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/modules/directives.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/modules/directives.js","mtime":1596624900306},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CgovKiAgICAgICAqLwppbXBvcnQgeyBlbXB0eU5vZGUgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3Zkb20vcGF0Y2gnOwppbXBvcnQgeyByZXNvbHZlQXNzZXQsIGhhbmRsZUVycm9yIH0gZnJvbSAnLi4vLi4vLi4vY29yZS91dGlsL2luZGV4JzsKaW1wb3J0IHsgbWVyZ2VWTm9kZUhvb2sgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3Zkb20vaGVscGVycy9pbmRleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjcmVhdGU6IHVwZGF0ZURpcmVjdGl2ZXMsCiAgdXBkYXRlOiB1cGRhdGVEaXJlY3RpdmVzLAogIGRlc3Ryb3k6IGZ1bmN0aW9uIHVuYmluZERpcmVjdGl2ZXModm5vZGUpIHsKICAgIHVwZGF0ZURpcmVjdGl2ZXModm5vZGUsIGVtcHR5Tm9kZSk7CiAgfQp9OwoKZnVuY3Rpb24gdXBkYXRlRGlyZWN0aXZlcyhvbGRWbm9kZSwgdm5vZGUpIHsKICBpZiAob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzIHx8IHZub2RlLmRhdGEuZGlyZWN0aXZlcykgewogICAgX3VwZGF0ZShvbGRWbm9kZSwgdm5vZGUpOwogIH0KfQoKZnVuY3Rpb24gX3VwZGF0ZShvbGRWbm9kZSwgdm5vZGUpIHsKICB2YXIgaXNDcmVhdGUgPSBvbGRWbm9kZSA9PT0gZW1wdHlOb2RlOwogIHZhciBpc0Rlc3Ryb3kgPSB2bm9kZSA9PT0gZW1wdHlOb2RlOwogIHZhciBvbGREaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyhvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMsIG9sZFZub2RlLmNvbnRleHQpOwogIHZhciBuZXdEaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyh2bm9kZS5kYXRhLmRpcmVjdGl2ZXMsIHZub2RlLmNvbnRleHQpOwogIHZhciBkaXJzV2l0aEluc2VydCA9IFtdOwogIHZhciBkaXJzV2l0aFBvc3RwYXRjaCA9IFtdOwogIHZhciBrZXksIG9sZERpciwgZGlyOwoKICBmb3IgKGtleSBpbiBuZXdEaXJzKSB7CiAgICBvbGREaXIgPSBvbGREaXJzW2tleV07CiAgICBkaXIgPSBuZXdEaXJzW2tleV07CgogICAgaWYgKCFvbGREaXIpIHsKICAgICAgLy8gbmV3IGRpcmVjdGl2ZSwgYmluZAogICAgICBjYWxsSG9vayhkaXIsICdiaW5kJywgdm5vZGUsIG9sZFZub2RlKTsKCiAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuaW5zZXJ0ZWQpIHsKICAgICAgICBkaXJzV2l0aEluc2VydC5wdXNoKGRpcik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIGV4aXN0aW5nIGRpcmVjdGl2ZSwgdXBkYXRlCiAgICAgIGRpci5vbGRWYWx1ZSA9IG9sZERpci52YWx1ZTsKICAgICAgY2FsbEhvb2soZGlyLCAndXBkYXRlJywgdm5vZGUsIG9sZFZub2RlKTsKCiAgICAgIGlmIChkaXIuZGVmICYmIGRpci5kZWYuY29tcG9uZW50VXBkYXRlZCkgewogICAgICAgIGRpcnNXaXRoUG9zdHBhdGNoLnB1c2goZGlyKTsKICAgICAgfQogICAgfQogIH0KCiAgaWYgKGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aCkgewogICAgdmFyIGNhbGxJbnNlcnQgPSBmdW5jdGlvbiBjYWxsSW5zZXJ0KCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY2FsbEhvb2soZGlyc1dpdGhJbnNlcnRbaV0sICdpbnNlcnRlZCcsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgIH0KICAgIH07CgogICAgaWYgKGlzQ3JlYXRlKSB7CiAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAnaW5zZXJ0JywgY2FsbEluc2VydCk7CiAgICB9IGVsc2UgewogICAgICBjYWxsSW5zZXJ0KCk7CiAgICB9CiAgfQoKICBpZiAoZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoKSB7CiAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ3Bvc3RwYXRjaCcsIGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXJzV2l0aFBvc3RwYXRjaC5sZW5ndGg7IGkrKykgewogICAgICAgIGNhbGxIb29rKGRpcnNXaXRoUG9zdHBhdGNoW2ldLCAnY29tcG9uZW50VXBkYXRlZCcsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgaWYgKCFpc0NyZWF0ZSkgewogICAgZm9yIChrZXkgaW4gb2xkRGlycykgewogICAgICBpZiAoIW5ld0RpcnNba2V5XSkgewogICAgICAgIC8vIG5vIGxvbmdlciBwcmVzZW50LCB1bmJpbmQKICAgICAgICBjYWxsSG9vayhvbGREaXJzW2tleV0sICd1bmJpbmQnLCBvbGRWbm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7CiAgICAgIH0KICAgIH0KICB9Cn0KCnZhciBlbXB0eU1vZGlmaWVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgpmdW5jdGlvbiBub3JtYWxpemVEaXJlY3RpdmVzKGRpcnMsIHZtKSB7CiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogIGlmICghZGlycykgewogICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICByZXR1cm4gcmVzOwogIH0KCiAgdmFyIGksIGRpcjsKCiAgZm9yIChpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHsKICAgIGRpciA9IGRpcnNbaV07CgogICAgaWYgKCFkaXIubW9kaWZpZXJzKSB7CiAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICBkaXIubW9kaWZpZXJzID0gZW1wdHlNb2RpZmllcnM7CiAgICB9CgogICAgcmVzW2dldFJhd0Rpck5hbWUoZGlyKV0gPSBkaXI7CiAgICBkaXIuZGVmID0gcmVzb2x2ZUFzc2V0KHZtLiRvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpci5uYW1lLCB0cnVlKTsKICB9IC8vICRmbG93LWRpc2FibGUtbGluZQoKCiAgcmV0dXJuIHJlczsKfQoKZnVuY3Rpb24gZ2V0UmF3RGlyTmFtZShkaXIpIHsKICByZXR1cm4gZGlyLnJhd05hbWUgfHwgIiIuY29uY2F0KGRpci5uYW1lLCAiLiIpLmNvbmNhdChPYmplY3Qua2V5cyhkaXIubW9kaWZpZXJzIHx8IHt9KS5qb2luKCcuJykpOwp9CgpmdW5jdGlvbiBjYWxsSG9vayhkaXIsIGhvb2ssIHZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KSB7CiAgdmFyIGZuID0gZGlyLmRlZiAmJiBkaXIuZGVmW2hvb2tdOwoKICBpZiAoZm4pIHsKICAgIHRyeSB7CiAgICAgIGZuKHZub2RlLmVsbSwgZGlyLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGhhbmRsZUVycm9yKGUsIHZub2RlLmNvbnRleHQsICJkaXJlY3RpdmUgIi5jb25jYXQoZGlyLm5hbWUsICIgIikuY29uY2F0KGhvb2ssICIgaG9vayIpKTsKICAgIH0KICB9Cn0="},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/modules/directives.js"],"names":["emptyNode","resolveAsset","handleError","mergeVNodeHook","create","updateDirectives","update","destroy","unbindDirectives","vnode","oldVnode","data","directives","_update","isCreate","isDestroy","oldDirs","normalizeDirectives","context","newDirs","dirsWithInsert","dirsWithPostpatch","key","oldDir","dir","callHook","def","inserted","push","oldValue","value","componentUpdated","length","callInsert","i","emptyModifiers","Object","dirs","vm","res","modifiers","getRawDirName","$options","name","rawName","keys","join","hook","fn","elm","e"],"mappings":";;;;;AAAA;AAEA,SAAQA,SAAR,QAAwB,0BAAxB;AACA,SAAQC,YAAR,EAAsBC,WAAtB,QAAwC,0BAAxC;AACA,SAAQC,cAAR,QAA6B,kCAA7B;AAEA,eAAe;AACbC,EAAAA,MAAM,EAAEC,gBADK;AAEbC,EAAAA,MAAM,EAAED,gBAFK;AAGbE,EAAAA,OAAO,EAAE,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AACxCJ,IAAAA,gBAAgB,CAACI,KAAD,EAAQT,SAAR,CAAhB;AACD;AALY,CAAf;;AAQA,SAASK,gBAAT,CAA0BK,QAA1B,EAAoCD,KAApC,EAA2C;AACzC,MAAIC,QAAQ,CAACC,IAAT,CAAcC,UAAd,IAA4BH,KAAK,CAACE,IAAN,CAAWC,UAA3C,EAAuD;AACrDC,IAAAA,OAAO,CAACH,QAAD,EAAWD,KAAX,CAAP;AACD;AACF;;AAED,SAASI,OAAT,CAAiBH,QAAjB,EAA2BD,KAA3B,EAAkC;AAChC,MAAMK,QAAQ,GAAGJ,QAAQ,KAAKV,SAA9B;AACA,MAAMe,SAAS,GAAGN,KAAK,KAAKT,SAA5B;AACA,MAAMgB,OAAO,GAAGC,mBAAmB,CAACP,QAAQ,CAACC,IAAT,CAAcC,UAAf,EAA2BF,QAAQ,CAACQ,OAApC,CAAnC;AACA,MAAMC,OAAO,GAAGF,mBAAmB,CAACR,KAAK,CAACE,IAAN,CAAWC,UAAZ,EAAwBH,KAAK,CAACS,OAA9B,CAAnC;AAEA,MAAME,cAAc,GAAG,EAAvB;AACA,MAAMC,iBAAiB,GAAG,EAA1B;AAEA,MAAIC,GAAJ,EAASC,MAAT,EAAiBC,GAAjB;;AACA,OAAKF,GAAL,IAAYH,OAAZ,EAAqB;AACnBI,IAAAA,MAAM,GAAGP,OAAO,CAACM,GAAD,CAAhB;AACAE,IAAAA,GAAG,GAAGL,OAAO,CAACG,GAAD,CAAb;;AACA,QAAI,CAACC,MAAL,EAAa;AACX;AACAE,MAAAA,QAAQ,CAACD,GAAD,EAAM,MAAN,EAAcf,KAAd,EAAqBC,QAArB,CAAR;;AACA,UAAIc,GAAG,CAACE,GAAJ,IAAWF,GAAG,CAACE,GAAJ,CAAQC,QAAvB,EAAiC;AAC/BP,QAAAA,cAAc,CAACQ,IAAf,CAAoBJ,GAApB;AACD;AACF,KAND,MAMO;AACL;AACAA,MAAAA,GAAG,CAACK,QAAJ,GAAeN,MAAM,CAACO,KAAtB;AACAL,MAAAA,QAAQ,CAACD,GAAD,EAAM,QAAN,EAAgBf,KAAhB,EAAuBC,QAAvB,CAAR;;AACA,UAAIc,GAAG,CAACE,GAAJ,IAAWF,GAAG,CAACE,GAAJ,CAAQK,gBAAvB,EAAyC;AACvCV,QAAAA,iBAAiB,CAACO,IAAlB,CAAuBJ,GAAvB;AACD;AACF;AACF;;AAED,MAAIJ,cAAc,CAACY,MAAnB,EAA2B;AACzB,QAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,cAAc,CAACY,MAAnC,EAA2CE,CAAC,EAA5C,EAAgD;AAC9CT,QAAAA,QAAQ,CAACL,cAAc,CAACc,CAAD,CAAf,EAAoB,UAApB,EAAgCzB,KAAhC,EAAuCC,QAAvC,CAAR;AACD;AACF,KAJD;;AAKA,QAAII,QAAJ,EAAc;AACZX,MAAAA,cAAc,CAACM,KAAD,EAAQ,QAAR,EAAkBwB,UAAlB,CAAd;AACD,KAFD,MAEO;AACLA,MAAAA,UAAU;AACX;AACF;;AAED,MAAIZ,iBAAiB,CAACW,MAAtB,EAA8B;AAC5B7B,IAAAA,cAAc,CAACM,KAAD,EAAQ,WAAR,EAAqB,YAAM;AACvC,WAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,iBAAiB,CAACW,MAAtC,EAA8CE,CAAC,EAA/C,EAAmD;AACjDT,QAAAA,QAAQ,CAACJ,iBAAiB,CAACa,CAAD,CAAlB,EAAuB,kBAAvB,EAA2CzB,KAA3C,EAAkDC,QAAlD,CAAR;AACD;AACF,KAJa,CAAd;AAKD;;AAED,MAAI,CAACI,QAAL,EAAe;AACb,SAAKQ,GAAL,IAAYN,OAAZ,EAAqB;AACnB,UAAI,CAACG,OAAO,CAACG,GAAD,CAAZ,EAAmB;AACjB;AACAG,QAAAA,QAAQ,CAACT,OAAO,CAACM,GAAD,CAAR,EAAe,QAAf,EAAyBZ,QAAzB,EAAmCA,QAAnC,EAA6CK,SAA7C,CAAR;AACD;AACF;AACF;AACF;;AAED,IAAMoB,cAAc,GAAGC,MAAM,CAAChC,MAAP,CAAc,IAAd,CAAvB;;AAEA,SAASa,mBAAT,CACEoB,IADF,EAEEC,EAFF,EAGE;AACA,MAAMC,GAAG,GAAGH,MAAM,CAAChC,MAAP,CAAc,IAAd,CAAZ;;AACA,MAAI,CAACiC,IAAL,EAAW;AACT;AACA,WAAOE,GAAP;AACD;;AACD,MAAIL,CAAJ,EAAOV,GAAP;;AACA,OAAKU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,IAAI,CAACL,MAArB,EAA6BE,CAAC,EAA9B,EAAkC;AAChCV,IAAAA,GAAG,GAAGa,IAAI,CAACH,CAAD,CAAV;;AACA,QAAI,CAACV,GAAG,CAACgB,SAAT,EAAoB;AAClB;AACAhB,MAAAA,GAAG,CAACgB,SAAJ,GAAgBL,cAAhB;AACD;;AACDI,IAAAA,GAAG,CAACE,aAAa,CAACjB,GAAD,CAAd,CAAH,GAA0BA,GAA1B;AACAA,IAAAA,GAAG,CAACE,GAAJ,GAAUzB,YAAY,CAACqC,EAAE,CAACI,QAAJ,EAAc,YAAd,EAA4BlB,GAAG,CAACmB,IAAhC,EAAsC,IAAtC,CAAtB;AACD,GAfD,CAgBA;;;AACA,SAAOJ,GAAP;AACD;;AAED,SAASE,aAAT,CAAuBjB,GAAvB,EAA4B;AAC1B,SAAOA,GAAG,CAACoB,OAAJ,cAAkBpB,GAAG,CAACmB,IAAtB,cAA8BP,MAAM,CAACS,IAAP,CAAYrB,GAAG,CAACgB,SAAJ,IAAiB,EAA7B,EAAiCM,IAAjC,CAAsC,GAAtC,CAA9B,CAAP;AACD;;AAED,SAASrB,QAAT,CAAkBD,GAAlB,EAAuBuB,IAAvB,EAA6BtC,KAA7B,EAAoCC,QAApC,EAA8CK,SAA9C,EAAyD;AACvD,MAAMiC,EAAE,GAAGxB,GAAG,CAACE,GAAJ,IAAWF,GAAG,CAACE,GAAJ,CAAQqB,IAAR,CAAtB;;AACA,MAAIC,EAAJ,EAAQ;AACN,QAAI;AACFA,MAAAA,EAAE,CAACvC,KAAK,CAACwC,GAAP,EAAYzB,GAAZ,EAAiBf,KAAjB,EAAwBC,QAAxB,EAAkCK,SAAlC,CAAF;AACD,KAFD,CAEE,OAAOmC,CAAP,EAAU;AACVhD,MAAAA,WAAW,CAACgD,CAAD,EAAIzC,KAAK,CAACS,OAAV,sBAAgCM,GAAG,CAACmB,IAApC,cAA4CI,IAA5C,WAAX;AACD;AACF;AACF","sourcesContent":["/*       */\n\nimport {emptyNode} from '../../../core/vdom/patch'\nimport {resolveAsset, handleError} from '../../../core/util/index'\nimport {mergeVNodeHook} from '../../../core/vdom/helpers/index'\n\nexport default {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives(vnode) {\n    updateDirectives(vnode, emptyNode)\n  }\n}\n\nfunction updateDirectives(oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode)\n  }\n}\n\nfunction _update(oldVnode, vnode) {\n  const isCreate = oldVnode === emptyNode\n  const isDestroy = vnode === emptyNode\n  const oldDirs = normalizeDirectives(oldVnode.data.directives, oldVnode.context)\n  const newDirs = normalizeDirectives(vnode.data.directives, vnode.context)\n\n  const dirsWithInsert = []\n  const dirsWithPostpatch = []\n\n  let key, oldDir, dir\n  for (key in newDirs) {\n    oldDir = oldDirs[key]\n    dir = newDirs[key]\n    if (!oldDir) {\n      // new directive, bind\n      callHook(dir, 'bind', vnode, oldVnode)\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir)\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value\n      callHook(dir, 'update', vnode, oldVnode)\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir)\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    const callInsert = () => {\n      for (let i = 0; i < dirsWithInsert.length; i++) {\n        callHook(dirsWithInsert[i], 'inserted', vnode, oldVnode)\n      }\n    }\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert)\n    } else {\n      callInsert()\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', () => {\n      for (let i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode)\n      }\n    })\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy)\n      }\n    }\n  }\n}\n\nconst emptyModifiers = Object.create(null)\n\nfunction normalizeDirectives(\n  dirs,\n  vm\n) {\n  const res = Object.create(null)\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  let i, dir\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i]\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers\n    }\n    res[getRawDirName(dir)] = dir\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true)\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName(dir) {\n  return dir.rawName || `${dir.name}.${Object.keys(dir.modifiers || {}).join('.')}`\n}\n\nfunction callHook(dir, hook, vnode, oldVnode, isDestroy) {\n  const fn = dir.def && dir.def[hook]\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy)\n    } catch (e) {\n      handleError(e, vnode.context, `directive ${dir.name} ${hook} hook`)\n    }\n  }\n}\n"]}]}