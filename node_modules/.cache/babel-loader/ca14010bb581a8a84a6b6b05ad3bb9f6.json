{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/modules/ref.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/modules/ref.js","mtime":1596534489000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwoKLyogICAgICAgKi8KaW1wb3J0IHsgcmVtb3ZlLCBpc0RlZiB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC91dGlsJzsKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKF8sIHZub2RlKSB7CiAgICByZWdpc3RlclJlZih2bm9kZSk7CiAgfSwKICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvbGRWbm9kZSwgdm5vZGUpIHsKICAgIGlmIChvbGRWbm9kZS5kYXRhLnJlZiAhPT0gdm5vZGUuZGF0YS5yZWYpIHsKICAgICAgcmVnaXN0ZXJSZWYob2xkVm5vZGUsIHRydWUpOwogICAgICByZWdpc3RlclJlZih2bm9kZSk7CiAgICB9CiAgfSwKICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KHZub2RlKSB7CiAgICByZWdpc3RlclJlZih2bm9kZSwgdHJ1ZSk7CiAgfQp9OwpleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJSZWYodm5vZGUsIGlzUmVtb3ZhbCkgewogIHZhciBrZXkgPSB2bm9kZS5kYXRhLnJlZjsKICBpZiAoIWlzRGVmKGtleSkpIHJldHVybjsKICB2YXIgdm0gPSB2bm9kZS5jb250ZXh0OwogIHZhciByZWYgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSB8fCB2bm9kZS5lbG07CiAgdmFyIHJlZnMgPSB2bS4kcmVmczsKCiAgaWYgKGlzUmVtb3ZhbCkgewogICAgaWYgKEFycmF5LmlzQXJyYXkocmVmc1trZXldKSkgewogICAgICByZW1vdmUocmVmc1trZXldLCByZWYpOwogICAgfSBlbHNlIGlmIChyZWZzW2tleV0gPT09IHJlZikgewogICAgICByZWZzW2tleV0gPSB1bmRlZmluZWQ7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh2bm9kZS5kYXRhLnJlZkluRm9yKSB7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZWZzW2tleV0pKSB7CiAgICAgICAgcmVmc1trZXldID0gW3JlZl07CiAgICAgIH0gZWxzZSBpZiAocmVmc1trZXldLmluZGV4T2YocmVmKSA8IDApIHsKICAgICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgICByZWZzW2tleV0ucHVzaChyZWYpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZWZzW2tleV0gPSByZWY7CiAgICB9CiAgfQp9"},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/modules/ref.js"],"names":["remove","isDef","create","_","vnode","registerRef","update","oldVnode","data","ref","destroy","isRemoval","key","vm","context","componentInstance","elm","refs","$refs","Array","isArray","undefined","refInFor","indexOf","push"],"mappings":";;AAAA;AAEA,SAAQA,MAAR,EAAgBC,KAAhB,QAA4B,sBAA5B;AAEA,eAAe;AACbC,EAAAA,MADa,kBACNC,CADM,EACHC,KADG,EACI;AACfC,IAAAA,WAAW,CAACD,KAAD,CAAX;AACD,GAHY;AAIbE,EAAAA,MAJa,kBAINC,QAJM,EAIIH,KAJJ,EAIW;AACtB,QAAIG,QAAQ,CAACC,IAAT,CAAcC,GAAd,KAAsBL,KAAK,CAACI,IAAN,CAAWC,GAArC,EAA0C;AACxCJ,MAAAA,WAAW,CAACE,QAAD,EAAW,IAAX,CAAX;AACAF,MAAAA,WAAW,CAACD,KAAD,CAAX;AACD;AACF,GATY;AAUbM,EAAAA,OAVa,mBAULN,KAVK,EAUE;AACbC,IAAAA,WAAW,CAACD,KAAD,EAAQ,IAAR,CAAX;AACD;AAZY,CAAf;AAeA,OAAO,SAASC,WAAT,CAAqBD,KAArB,EAA4BO,SAA5B,EAAuC;AAC5C,MAAMC,GAAG,GAAGR,KAAK,CAACI,IAAN,CAAWC,GAAvB;AACA,MAAI,CAACR,KAAK,CAACW,GAAD,CAAV,EAAiB;AAEjB,MAAMC,EAAE,GAAGT,KAAK,CAACU,OAAjB;AACA,MAAML,GAAG,GAAGL,KAAK,CAACW,iBAAN,IAA2BX,KAAK,CAACY,GAA7C;AACA,MAAMC,IAAI,GAAGJ,EAAE,CAACK,KAAhB;;AACA,MAAIP,SAAJ,EAAe;AACb,QAAIQ,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACL,GAAD,CAAlB,CAAJ,EAA8B;AAC5BZ,MAAAA,MAAM,CAACiB,IAAI,CAACL,GAAD,CAAL,EAAYH,GAAZ,CAAN;AACD,KAFD,MAEO,IAAIQ,IAAI,CAACL,GAAD,CAAJ,KAAcH,GAAlB,EAAuB;AAC5BQ,MAAAA,IAAI,CAACL,GAAD,CAAJ,GAAYS,SAAZ;AACD;AACF,GAND,MAMO;AACL,QAAIjB,KAAK,CAACI,IAAN,CAAWc,QAAf,EAAyB;AACvB,UAAI,CAACH,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACL,GAAD,CAAlB,CAAL,EAA+B;AAC7BK,QAAAA,IAAI,CAACL,GAAD,CAAJ,GAAY,CAACH,GAAD,CAAZ;AACD,OAFD,MAEO,IAAIQ,IAAI,CAACL,GAAD,CAAJ,CAAUW,OAAV,CAAkBd,GAAlB,IAAyB,CAA7B,EAAgC;AACrC;AACAQ,QAAAA,IAAI,CAACL,GAAD,CAAJ,CAAUY,IAAV,CAAef,GAAf;AACD;AACF,KAPD,MAOO;AACLQ,MAAAA,IAAI,CAACL,GAAD,CAAJ,GAAYH,GAAZ;AACD;AACF;AACF","sourcesContent":["/*       */\n\nimport {remove, isDef} from '../../../shared/util'\n\nexport default {\n  create(_, vnode) {\n    registerRef(vnode)\n  },\n  update(oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true)\n      registerRef(vnode)\n    }\n  },\n  destroy(vnode) {\n    registerRef(vnode, true)\n  }\n}\n\nexport function registerRef(vnode, isRemoval) {\n  const key = vnode.data.ref\n  if (!isDef(key)) return\n\n  const vm = vnode.context\n  const ref = vnode.componentInstance || vnode.elm\n  const refs = vm.$refs\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref)\n    } else if (refs[key] === ref) {\n      refs[key] = undefined\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref]\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref)\n      }\n    } else {\n      refs[key] = ref\n    }\n  }\n}\n"]}]}