{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/core/observer/watcher.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/core/observer/watcher.js","mtime":1596450179000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy90ZWNoL3dvcmtzcGFjZS9kZW1vL3Z1ZS1kZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3RlY2gvd29ya3NwYWNlL2RlbW8vdnVlLWRlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvdGVjaC93b3Jrc3BhY2UvZGVtby92dWUtZGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKLyogICAgICAgKi8KaW1wb3J0IHsgd2FybiwgcmVtb3ZlLCBpc09iamVjdCwgcGFyc2VQYXRoLCBfU2V0IGFzIFNldCwgaGFuZGxlRXJyb3IsIG5vb3AgfSBmcm9tICcuLi91dGlsL2luZGV4JzsKaW1wb3J0IHsgdHJhdmVyc2UgfSBmcm9tICcuL3RyYXZlcnNlJzsKaW1wb3J0IHsgcXVldWVXYXRjaGVyIH0gZnJvbSAnLi9zY2hlZHVsZXInOwppbXBvcnQgRGVwLCB7IHB1c2hUYXJnZXQsIHBvcFRhcmdldCB9IGZyb20gJy4vZGVwJzsKdmFyIHVpZCA9IDA7Ci8qKgogKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcywKICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy4KICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuCiAqLwoKdmFyIFdhdGNoZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zLCBpc1JlbmRlcldhdGNoZXIpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXYXRjaGVyKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZtIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImV4cHJlc3Npb24iLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY2IiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaWQiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGVlcCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ1c2VyIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxhenkiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3luYyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkaXJ0eSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhY3RpdmUiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGVwcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZXdEZXBzIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRlcElkcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZXdEZXBJZHMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYmVmb3JlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdldHRlciIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2YWx1ZSIsIHZvaWQgMCk7CgogICAgdGhpcy52bSA9IHZtOwoKICAgIGlmIChpc1JlbmRlcldhdGNoZXIpIHsKICAgICAgdm0uX3dhdGNoZXIgPSB0aGlzOwogICAgfQoKICAgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpOyAvLyBvcHRpb25zCgoKICAgIGlmIChvcHRpb25zKSB7CiAgICAgIHRoaXMuZGVlcCA9ICEhb3B0aW9ucy5kZWVwOwogICAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjsKICAgICAgdGhpcy5sYXp5ID0gISFvcHRpb25zLmxhenk7CiAgICAgIHRoaXMuc3luYyA9ICEhb3B0aW9ucy5zeW5jOwogICAgICB0aGlzLmJlZm9yZSA9IG9wdGlvbnMuYmVmb3JlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kZWVwID0gdGhpcy51c2VyID0gdGhpcy5sYXp5ID0gdGhpcy5zeW5jID0gZmFsc2U7CiAgICB9CgogICAgdGhpcy5jYiA9IGNiOwogICAgdGhpcy5pZCA9ICsrdWlkOyAvLyB1aWQgZm9yIGJhdGNoaW5nCgogICAgdGhpcy5hY3RpdmUgPSB0cnVlOwogICAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnMKCiAgICB0aGlzLmRlcHMgPSBbXTsKICAgIHRoaXMubmV3RGVwcyA9IFtdOwogICAgdGhpcy5kZXBJZHMgPSBuZXcgU2V0KCk7CiAgICB0aGlzLm5ld0RlcElkcyA9IG5ldyBTZXQoKTsKICAgIHRoaXMuZXhwcmVzc2lvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBleHBPckZuLnRvU3RyaW5nKCkgOiAnJzsgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyCgogICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZ2V0dGVyID0gcGFyc2VQYXRoKGV4cE9yRm4pOwoKICAgICAgaWYgKCF0aGlzLmdldHRlcikgewogICAgICAgIHRoaXMuZ2V0dGVyID0gbm9vcDsKICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oIkZhaWxlZCB3YXRjaGluZyBwYXRoOiBcIiIuY29uY2F0KGV4cE9yRm4sICJcIiAiKSArICdXYXRjaGVyIG9ubHkgYWNjZXB0cyBzaW1wbGUgZG90LWRlbGltaXRlZCBwYXRocy4gJyArICdGb3IgZnVsbCBjb250cm9sLCB1c2UgYSBmdW5jdGlvbiBpbnN0ZWFkLicsIHZtKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpOwogIH0KICAvKioKICAgKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoV2F0Y2hlciwgW3sKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KCkgewogICAgICBwdXNoVGFyZ2V0KHRoaXMpOwogICAgICB2YXIgdmFsdWU7CiAgICAgIHZhciB2bSA9IHRoaXMudm07CgogICAgICB0cnkgewogICAgICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbCh2bSwgdm0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICJnZXR0ZXIgZm9yIHdhdGNoZXIgXCIiLmNvbmNhdCh0aGlzLmV4cHJlc3Npb24sICJcIiIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgLy8gInRvdWNoIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhcwogICAgICAgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZwogICAgICAgIGlmICh0aGlzLmRlZXApIHsKICAgICAgICAgIHRyYXZlcnNlKHZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHBvcFRhcmdldCgpOwogICAgICAgIHRoaXMuY2xlYW51cERlcHMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLgogICAgICovCgogIH0sIHsKICAgIGtleTogImFkZERlcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRGVwKGRlcCkgewogICAgICB2YXIgaWQgPSBkZXAuaWQ7CgogICAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHsKICAgICAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpOwogICAgICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7CgogICAgICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkgewogICAgICAgICAgZGVwLmFkZFN1Yih0aGlzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjbGVhbnVwRGVwcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW51cERlcHMoKSB7CiAgICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDsKCiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldOwoKICAgICAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7CiAgICAgICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzOwogICAgICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzOwogICAgICB0aGlzLm5ld0RlcElkcyA9IHRtcDsKICAgICAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTsKICAgICAgdG1wID0gdGhpcy5kZXBzOwogICAgICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7CiAgICAgIHRoaXMubmV3RGVwcyA9IHRtcDsKICAgICAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLgogICAgICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgICAgaWYgKHRoaXMubGF6eSkgewogICAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3luYykgewogICAgICAgIHRoaXMucnVuKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcXVldWVXYXRjaGVyKHRoaXMpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNjaGVkdWxlciBqb2IgaW50ZXJmYWNlLgogICAgICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlci4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJydW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJ1bigpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTsKCiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8IC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlbgogICAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkKICAgICAgICAvLyBoYXZlIG11dGF0ZWQuCiAgICAgICAgaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgewogICAgICAgICAgLy8gc2V0IG5ldyB2YWx1ZQogICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCiAgICAgICAgICBpZiAodGhpcy51c2VyKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCB0aGlzLnZtLCAiY2FsbGJhY2sgZm9yIHdhdGNoZXIgXCIiLmNvbmNhdCh0aGlzLmV4cHJlc3Npb24sICJcIiIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci4KICAgICAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJldmFsdWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXZhbHVhdGUoKSB7CiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpOwogICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLgogICAgICovCgogIH0sIHsKICAgIGtleTogImRlcGVuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVwZW5kKCkgewogICAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7CgogICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3Vic2NyaWJlciBsaXN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogInRlYXJkb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0ZWFyZG93bigpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdAogICAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXQKICAgICAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkLgogICAgICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCkgewogICAgICAgICAgcmVtb3ZlKHRoaXMudm0uX3dhdGNoZXJzLCB0aGlzKTsKICAgICAgICB9CgogICAgICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDsKCiAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBXYXRjaGVyOwp9KCk7CgpleHBvcnQgeyBXYXRjaGVyIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/core/observer/watcher.js"],"names":["warn","remove","isObject","parsePath","_Set","Set","handleError","noop","traverse","queueWatcher","Dep","pushTarget","popTarget","uid","Watcher","vm","expOrFn","cb","options","isRenderWatcher","_watcher","_watchers","push","deep","user","lazy","sync","before","id","active","dirty","deps","newDeps","depIds","newDepIds","expression","process","env","NODE_ENV","toString","getter","value","undefined","get","call","e","cleanupDeps","dep","has","add","addSub","i","length","removeSub","tmp","clear","run","oldValue","depend","_isBeingDestroyed"],"mappings":"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","sourcesContent":["/*       */\n\nimport {\n  warn,\n  remove,\n  isObject,\n  parsePath,\n  _Set as Set,\n  handleError,\n  noop\n} from '../util/index'\n\nimport {traverse} from './traverse'\nimport {queueWatcher} from './scheduler'\nimport Dep, {pushTarget, popTarget} from './dep'\n\n\nlet uid = 0\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nexport default class Watcher {\n  vm;\n  expression;\n  cb;\n  id;\n  deep;\n  user;\n  lazy;\n  sync;\n  dirty;\n  active;\n  deps;\n  newDeps;\n  depIds;\n  newDepIds;\n  before;\n  getter;\n  value;\n\n  constructor(\n    vm,\n    expOrFn,\n    cb,\n    options,\n    isRenderWatcher\n  ) {\n    this.vm = vm\n    if (isRenderWatcher) {\n      vm._watcher = this\n    }\n    vm._watchers.push(this)\n    // options\n    if (options) {\n      this.deep = !!options.deep\n      this.user = !!options.user\n      this.lazy = !!options.lazy\n      this.sync = !!options.sync\n      this.before = options.before\n    } else {\n      this.deep = this.user = this.lazy = this.sync = false\n    }\n    this.cb = cb\n    this.id = ++uid // uid for batching\n    this.active = true\n    this.dirty = this.lazy // for lazy watchers\n    this.deps = []\n    this.newDeps = []\n    this.depIds = new Set()\n    this.newDepIds = new Set()\n    this.expression = process.env.NODE_ENV !== 'production'\n      ? expOrFn.toString()\n      : ''\n    // parse expression for getter\n    if (typeof expOrFn === 'function') {\n      this.getter = expOrFn\n    } else {\n      this.getter = parsePath(expOrFn)\n      if (!this.getter) {\n        this.getter = noop\n        process.env.NODE_ENV !== 'production' && warn(\n          `Failed watching path: \"${expOrFn}\" ` +\n          'Watcher only accepts simple dot-delimited paths. ' +\n          'For full control, use a function instead.',\n          vm\n        )\n      }\n    }\n    this.value = this.lazy\n      ? undefined\n      : this.get()\n  }\n\n  /**\n   * Evaluate the getter, and re-collect dependencies.\n   */\n  get() {\n    pushTarget(this)\n    let value\n    const vm = this.vm\n    try {\n      value = this.getter.call(vm, vm)\n    } catch (e) {\n      if (this.user) {\n        handleError(e, vm, `getter for watcher \"${this.expression}\"`)\n      } else {\n        throw e\n      }\n    } finally {\n      // \"touch\" every property so they are all tracked as\n      // dependencies for deep watching\n      if (this.deep) {\n        traverse(value)\n      }\n      popTarget()\n      this.cleanupDeps()\n    }\n    return value\n  }\n\n  /**\n   * Add a dependency to this directive.\n   */\n  addDep(dep) {\n    const id = dep.id\n    if (!this.newDepIds.has(id)) {\n      this.newDepIds.add(id)\n      this.newDeps.push(dep)\n      if (!this.depIds.has(id)) {\n        dep.addSub(this)\n      }\n    }\n  }\n\n  /**\n   * Clean up for dependency collection.\n   */\n  cleanupDeps() {\n    let i = this.deps.length\n    while (i--) {\n      const dep = this.deps[i]\n      if (!this.newDepIds.has(dep.id)) {\n        dep.removeSub(this)\n      }\n    }\n    let tmp = this.depIds\n    this.depIds = this.newDepIds\n    this.newDepIds = tmp\n    this.newDepIds.clear()\n    tmp = this.deps\n    this.deps = this.newDeps\n    this.newDeps = tmp\n    this.newDeps.length = 0\n  }\n\n  /**\n   * Subscriber interface.\n   * Will be called when a dependency changes.\n   */\n  update() {\n    /* istanbul ignore else */\n    if (this.lazy) {\n      this.dirty = true\n    } else if (this.sync) {\n      this.run()\n    } else {\n      queueWatcher(this)\n    }\n  }\n\n  /**\n   * Scheduler job interface.\n   * Will be called by the scheduler.\n   */\n  run() {\n    if (this.active) {\n      const value = this.get()\n      if (\n        value !== this.value ||\n        // Deep watchers and watchers on Object/Arrays should fire even\n        // when the value is the same, because the value may\n        // have mutated.\n        isObject(value) ||\n        this.deep\n      ) {\n        // set new value\n        const oldValue = this.value\n        this.value = value\n        if (this.user) {\n          try {\n            this.cb.call(this.vm, value, oldValue)\n          } catch (e) {\n            handleError(e, this.vm, `callback for watcher \"${this.expression}\"`)\n          }\n        } else {\n          this.cb.call(this.vm, value, oldValue)\n        }\n      }\n    }\n  }\n\n  /**\n   * Evaluate the value of the watcher.\n   * This only gets called for lazy watchers.\n   */\n  evaluate() {\n    this.value = this.get()\n    this.dirty = false\n  }\n\n  /**\n   * Depend on all deps collected by this watcher.\n   */\n  depend() {\n    let i = this.deps.length\n    while (i--) {\n      this.deps[i].depend()\n    }\n  }\n\n  /**\n   * Remove self from all dependencies' subscriber list.\n   */\n  teardown() {\n    if (this.active) {\n      // remove self from vm's watcher list\n      // this is a somewhat expensive operation so we skip it\n      // if the vm is being destroyed.\n      if (!this.vm._isBeingDestroyed) {\n        remove(this.vm._watchers, this)\n      }\n      let i = this.deps.length\n      while (i--) {\n        this.deps[i].removeSub(this)\n      }\n      this.active = false\n    }\n  }\n}\n"]}]}