{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/compiler/optimizer.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/compiler/optimizer.js","mtime":1596451104000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CgovKiAgICAgICAqLwppbXBvcnQgeyBtYWtlTWFwLCBpc0J1aWx0SW5UYWcsIGNhY2hlZCwgbm8gfSBmcm9tICcuLi9zaGFyZWQvdXRpbCc7CnZhciBpc1N0YXRpY0tleTsKdmFyIGlzUGxhdGZvcm1SZXNlcnZlZFRhZzsKdmFyIGdlblN0YXRpY0tleXNDYWNoZWQgPSBjYWNoZWQoZ2VuU3RhdGljS2V5cyk7Ci8qKgogKiBHb2FsIG9mIHRoZSBvcHRpbWl6ZXI6IHdhbGsgdGhlIGdlbmVyYXRlZCB0ZW1wbGF0ZSBBU1QgdHJlZQogKiBhbmQgZGV0ZWN0IHN1Yi10cmVlcyB0aGF0IGFyZSBwdXJlbHkgc3RhdGljLCBpLmUuIHBhcnRzIG9mCiAqIHRoZSBET00gdGhhdCBuZXZlciBuZWVkcyB0byBjaGFuZ2UuCiAqCiAqIE9uY2Ugd2UgZGV0ZWN0IHRoZXNlIHN1Yi10cmVlcywgd2UgY2FuOgogKgogKiAxLiBIb2lzdCB0aGVtIGludG8gY29uc3RhbnRzLCBzbyB0aGF0IHdlIG5vIGxvbmdlciBuZWVkIHRvCiAqICAgIGNyZWF0ZSBmcmVzaCBub2RlcyBmb3IgdGhlbSBvbiBlYWNoIHJlLXJlbmRlcjsKICogMi4gQ29tcGxldGVseSBza2lwIHRoZW0gaW4gdGhlIHBhdGNoaW5nIHByb2Nlc3MuCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIG9wdGltaXplKHJvb3QsIG9wdGlvbnMpIHsKICBpZiAoIXJvb3QpIHJldHVybjsKICBpc1N0YXRpY0tleSA9IGdlblN0YXRpY0tleXNDYWNoZWQob3B0aW9ucy5zdGF0aWNLZXlzIHx8ICcnKTsKICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87IC8vIGZpcnN0IHBhc3M6IG1hcmsgYWxsIG5vbi1zdGF0aWMgbm9kZXMuCgogIG1hcmtTdGF0aWMocm9vdCk7IC8vIHNlY29uZCBwYXNzOiBtYXJrIHN0YXRpYyByb290cy4KCiAgbWFya1N0YXRpY1Jvb3RzKHJvb3QsIGZhbHNlKTsKfQoKZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyhrZXlzKSB7CiAgcmV0dXJuIG1ha2VNYXAoJ3R5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwLGhhcyRTbG90JyArIChrZXlzID8gJywnICsga2V5cyA6ICcnKSk7Cn0KCmZ1bmN0aW9uIG1hcmtTdGF0aWMobm9kZSkgewogIG5vZGUuc3RhdGljID0gaXNTdGF0aWMobm9kZSk7CgogIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgIC8vIGRvIG5vdCBtYWtlIGNvbXBvbmVudCBzbG90IGNvbnRlbnQgc3RhdGljLiB0aGlzIGF2b2lkcwogICAgLy8gMS4gY29tcG9uZW50cyBub3QgYWJsZSB0byBtdXRhdGUgc2xvdCBub2RlcwogICAgLy8gMi4gc3RhdGljIHNsb3QgY29udGVudCBmYWlscyBmb3IgaG90LXJlbG9hZGluZwogICAgaWYgKCFpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcobm9kZS50YWcpICYmICFub2RlLmNvbXBvbmVudCAmJiBub2RlLnRhZyAhPT0gJ3Nsb3QnICYmIG5vZGUuYXR0cnNNYXBbJ2lubGluZS10ZW1wbGF0ZSddID09IG51bGwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTsKICAgICAgbWFya1N0YXRpYyhjaGlsZCk7CgogICAgICBpZiAoIWNoaWxkLnN0YXRpYykgewogICAgICAgIG5vZGUuc3RhdGljID0gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHsKICAgICAgZm9yICh2YXIgX2kgPSAxLCBfbCA9IG5vZGUuaWZDb25kaXRpb25zLmxlbmd0aDsgX2kgPCBfbDsgX2krKykgewogICAgICAgIHZhciBibG9jayA9IG5vZGUuaWZDb25kaXRpb25zW19pXS5ibG9jazsKICAgICAgICBtYXJrU3RhdGljKGJsb2NrKTsKCiAgICAgICAgaWYgKCFibG9jay5zdGF0aWMpIHsKICAgICAgICAgIG5vZGUuc3RhdGljID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBtYXJrU3RhdGljUm9vdHMobm9kZSwgaXNJbkZvcikgewogIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgIGlmIChub2RlLnN0YXRpYyB8fCBub2RlLm9uY2UpIHsKICAgICAgbm9kZS5zdGF0aWNJbkZvciA9IGlzSW5Gb3I7CiAgICB9IC8vIEZvciBhIG5vZGUgdG8gcXVhbGlmeSBhcyBhIHN0YXRpYyByb290LCBpdCBzaG91bGQgaGF2ZSBjaGlsZHJlbiB0aGF0CiAgICAvLyBhcmUgbm90IGp1c3Qgc3RhdGljIHRleHQuIE90aGVyd2lzZSB0aGUgY29zdCBvZiBob2lzdGluZyBvdXQgd2lsbAogICAgLy8gb3V0d2VpZ2ggdGhlIGJlbmVmaXRzIGFuZCBpdCdzIGJldHRlciBvZmYgdG8ganVzdCBhbHdheXMgcmVuZGVyIGl0IGZyZXNoLgoKCiAgICBpZiAobm9kZS5zdGF0aWMgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggJiYgIShub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09IDMpKSB7CiAgICAgIG5vZGUuc3RhdGljUm9vdCA9IHRydWU7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGUuc3RhdGljUm9vdCA9IGZhbHNlOwogICAgfQoKICAgIGlmIChub2RlLmNoaWxkcmVuKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBtYXJrU3RhdGljUm9vdHMobm9kZS5jaGlsZHJlbltpXSwgaXNJbkZvciB8fCAhIW5vZGUuZm9yKTsKICAgICAgfQogICAgfQoKICAgIGlmIChub2RlLmlmQ29uZGl0aW9ucykgewogICAgICBmb3IgKHZhciBfaTIgPSAxLCBfbDIgPSBub2RlLmlmQ29uZGl0aW9ucy5sZW5ndGg7IF9pMiA8IF9sMjsgX2kyKyspIHsKICAgICAgICBtYXJrU3RhdGljUm9vdHMobm9kZS5pZkNvbmRpdGlvbnNbX2kyXS5ibG9jaywgaXNJbkZvcik7CiAgICAgIH0KICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGlzU3RhdGljKG5vZGUpIHsKICBpZiAobm9kZS50eXBlID09PSAyKSB7CiAgICAvLyBleHByZXNzaW9uCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAobm9kZS50eXBlID09PSAzKSB7CiAgICAvLyB0ZXh0CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiAhIShub2RlLnByZSB8fCAhbm9kZS5oYXNCaW5kaW5ncyAmJiAvLyBubyBkeW5hbWljIGJpbmRpbmdzCiAgIW5vZGUuaWYgJiYgIW5vZGUuZm9yICYmIC8vIG5vdCB2LWlmIG9yIHYtZm9yIG9yIHYtZWxzZQogICFpc0J1aWx0SW5UYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGJ1aWx0LWluCiAgaXNQbGF0Zm9ybVJlc2VydmVkVGFnKG5vZGUudGFnKSAmJiAvLyBub3QgYSBjb21wb25lbnQKICAhaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3Iobm9kZSkgJiYgT2JqZWN0LmtleXMobm9kZSkuZXZlcnkoaXNTdGF0aWNLZXkpKTsKfQoKZnVuY3Rpb24gaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3Iobm9kZSkgewogIHdoaWxlIChub2RlLnBhcmVudCkgewogICAgbm9kZSA9IG5vZGUucGFyZW50OwoKICAgIGlmIChub2RlLnRhZyAhPT0gJ3RlbXBsYXRlJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKG5vZGUuZm9yKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KCiAgcmV0dXJuIGZhbHNlOwp9"},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/compiler/optimizer.js"],"names":["makeMap","isBuiltInTag","cached","no","isStaticKey","isPlatformReservedTag","genStaticKeysCached","genStaticKeys","optimize","root","options","staticKeys","isReservedTag","markStatic","markStaticRoots","keys","node","static","isStatic","type","tag","component","attrsMap","i","l","children","length","child","ifConditions","block","isInFor","once","staticInFor","staticRoot","for","pre","hasBindings","if","isDirectChildOfTemplateFor","Object","every","parent"],"mappings":"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","sourcesContent":["/*       */\n\nimport {makeMap, isBuiltInTag, cached, no} from '../shared/util'\n\nlet isStaticKey\nlet isPlatformReservedTag\n\nconst genStaticKeysCached = cached(genStaticKeys)\n\n/**\n * Goal of the optimizer: walk the generated template AST tree\n * and detect sub-trees that are purely static, i.e. parts of\n * the DOM that never needs to change.\n *\n * Once we detect these sub-trees, we can:\n *\n * 1. Hoist them into constants, so that we no longer need to\n *    create fresh nodes for them on each re-render;\n * 2. Completely skip them in the patching process.\n */\nexport function optimize(root, options) {\n  if (!root) return\n  isStaticKey = genStaticKeysCached(options.staticKeys || '')\n  isPlatformReservedTag = options.isReservedTag || no\n  // first pass: mark all non-static nodes.\n  markStatic(root)\n  // second pass: mark static roots.\n  markStaticRoots(root, false)\n}\n\nfunction genStaticKeys(keys) {\n  return makeMap(\n    'type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap,has$Slot' +\n    (keys ? ',' + keys : '')\n  )\n}\n\nfunction markStatic(node) {\n  node.static = isStatic(node)\n  if (node.type === 1) {\n    // do not make component slot content static. this avoids\n    // 1. components not able to mutate slot nodes\n    // 2. static slot content fails for hot-reloading\n    if (\n      !isPlatformReservedTag(node.tag) &&\n      !node.component &&\n      node.tag !== 'slot' &&\n      node.attrsMap['inline-template'] == null\n    ) {\n      return\n    }\n    for (let i = 0, l = node.children.length; i < l; i++) {\n      const child = node.children[i]\n      markStatic(child)\n      if (!child.static) {\n        node.static = false\n      }\n    }\n    if (node.ifConditions) {\n      for (let i = 1, l = node.ifConditions.length; i < l; i++) {\n        const block = node.ifConditions[i].block\n        markStatic(block)\n        if (!block.static) {\n          node.static = false\n        }\n      }\n    }\n  }\n}\n\nfunction markStaticRoots(node, isInFor) {\n  if (node.type === 1) {\n    if (node.static || node.once) {\n      node.staticInFor = isInFor\n    }\n    // For a node to qualify as a static root, it should have children that\n    // are not just static text. Otherwise the cost of hoisting out will\n    // outweigh the benefits and it's better off to just always render it fresh.\n    if (node.static && node.children.length && !(\n      node.children.length === 1 &&\n      node.children[0].type === 3\n    )) {\n      node.staticRoot = true\n      return\n    } else {\n      node.staticRoot = false\n    }\n    if (node.children) {\n      for (let i = 0, l = node.children.length; i < l; i++) {\n        markStaticRoots(node.children[i], isInFor || !!node.for)\n      }\n    }\n    if (node.ifConditions) {\n      for (let i = 1, l = node.ifConditions.length; i < l; i++) {\n        markStaticRoots(node.ifConditions[i].block, isInFor)\n      }\n    }\n  }\n}\n\nfunction isStatic(node) {\n  if (node.type === 2) { // expression\n    return false\n  }\n  if (node.type === 3) { // text\n    return true\n  }\n  return !!(node.pre || (\n    !node.hasBindings && // no dynamic bindings\n    !node.if && !node.for && // not v-if or v-for or v-else\n    !isBuiltInTag(node.tag) && // not a built-in\n    isPlatformReservedTag(node.tag) && // not a component\n    !isDirectChildOfTemplateFor(node) &&\n    Object.keys(node).every(isStaticKey)\n  ))\n}\n\nfunction isDirectChildOfTemplateFor(node) {\n  while (node.parent) {\n    node = node.parent\n    if (node.tag !== 'template') {\n      return false\n    }\n    if (node.for) {\n      return true\n    }\n  }\n  return false\n}\n"]}]}