{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/platforms/web/compiler/modules/model.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/platforms/web/compiler/modules/model.js","mtime":1596451332000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwoKLyogICAgICAgKi8KCi8qKgogKiBFeHBhbmQgaW5wdXRbdi1tb2RlbF0gd2l0aCBkeWFubWljIHR5cGUgYmluZGluZ3MgaW50byB2LWlmLWVsc2UgY2hhaW5zCiAqIFR1cm4gdGhpczoKICogICA8aW5wdXQgdi1tb2RlbD0iZGF0YVt0eXBlXSIgOnR5cGU9InR5cGUiPgogKiBpbnRvIHRoaXM6CiAqICAgPGlucHV0IHYtaWY9InR5cGUgPT09ICdjaGVja2JveCciIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJkYXRhW3R5cGVdIj4KICogICA8aW5wdXQgdi1lbHNlLWlmPSJ0eXBlID09PSAncmFkaW8nIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iZGF0YVt0eXBlXSI+CiAqICAgPGlucHV0IHYtZWxzZSA6dHlwZT0idHlwZSIgdi1tb2RlbD0iZGF0YVt0eXBlXSI+CiAqLwppbXBvcnQgeyBhZGRSYXdBdHRyLCBnZXRCaW5kaW5nQXR0ciwgZ2V0QW5kUmVtb3ZlQXR0ciB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbXBpbGVyL2hlbHBlcnMnOwppbXBvcnQgeyBwcm9jZXNzRm9yLCBwcm9jZXNzRWxlbWVudCwgYWRkSWZDb25kaXRpb24sIGNyZWF0ZUFTVEVsZW1lbnQgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21waWxlci9wYXJzZXIvaW5kZXgnOwoKZnVuY3Rpb24gcHJlVHJhbnNmb3JtTm9kZShlbCwgb3B0aW9ucykgewogIGlmIChlbC50YWcgPT09ICdpbnB1dCcpIHsKICAgIHZhciBtYXAgPSBlbC5hdHRyc01hcDsKCiAgICBpZiAoIW1hcFsndi1tb2RlbCddKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgdHlwZUJpbmRpbmc7CgogICAgaWYgKG1hcFsnOnR5cGUnXSB8fCBtYXBbJ3YtYmluZDp0eXBlJ10pIHsKICAgICAgdHlwZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3R5cGUnKTsKICAgIH0KCiAgICBpZiAoIW1hcC50eXBlICYmICF0eXBlQmluZGluZyAmJiBtYXBbJ3YtYmluZCddKSB7CiAgICAgIHR5cGVCaW5kaW5nID0gIigiLmNvbmNhdChtYXBbJ3YtYmluZCddLCAiKS50eXBlIik7CiAgICB9CgogICAgaWYgKHR5cGVCaW5kaW5nKSB7CiAgICAgIHZhciBpZkNvbmRpdGlvbiA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWlmJywgdHJ1ZSk7CiAgICAgIHZhciBpZkNvbmRpdGlvbkV4dHJhID0gaWZDb25kaXRpb24gPyAiJiYoIi5jb25jYXQoaWZDb25kaXRpb24sICIpIikgOiAiIjsKICAgICAgdmFyIGhhc0Vsc2UgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJywgdHJ1ZSkgIT0gbnVsbDsKICAgICAgdmFyIGVsc2VJZkNvbmRpdGlvbiA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UtaWYnLCB0cnVlKTsgLy8gMS4gY2hlY2tib3gKCiAgICAgIHZhciBicmFuY2gwID0gY2xvbmVBU1RFbGVtZW50KGVsKTsgLy8gcHJvY2VzcyBmb3Igb24gdGhlIG1haW4gbm9kZQoKICAgICAgcHJvY2Vzc0ZvcihicmFuY2gwKTsKICAgICAgYWRkUmF3QXR0cihicmFuY2gwLCAndHlwZScsICdjaGVja2JveCcpOwogICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gwLCBvcHRpb25zKTsKICAgICAgYnJhbmNoMC5wcm9jZXNzZWQgPSB0cnVlOyAvLyBwcmV2ZW50IGl0IGZyb20gZG91YmxlLXByb2Nlc3NlZAoKICAgICAgYnJhbmNoMC5pZiA9ICIoIi5jb25jYXQodHlwZUJpbmRpbmcsICIpPT09J2NoZWNrYm94JyIpICsgaWZDb25kaXRpb25FeHRyYTsKICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwgewogICAgICAgIGV4cDogYnJhbmNoMC5pZiwKICAgICAgICBibG9jazogYnJhbmNoMAogICAgICB9KTsgLy8gMi4gYWRkIHJhZGlvIGVsc2UtaWYgY29uZGl0aW9uCgogICAgICB2YXIgYnJhbmNoMSA9IGNsb25lQVNURWxlbWVudChlbCk7CiAgICAgIGdldEFuZFJlbW92ZUF0dHIoYnJhbmNoMSwgJ3YtZm9yJywgdHJ1ZSk7CiAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMSwgJ3R5cGUnLCAncmFkaW8nKTsKICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMSwgb3B0aW9ucyk7CiAgICAgIGFkZElmQ29uZGl0aW9uKGJyYW5jaDAsIHsKICAgICAgICBleHA6ICIoIi5jb25jYXQodHlwZUJpbmRpbmcsICIpPT09J3JhZGlvJyIpICsgaWZDb25kaXRpb25FeHRyYSwKICAgICAgICBibG9jazogYnJhbmNoMQogICAgICB9KTsgLy8gMy4gb3RoZXIKCiAgICAgIHZhciBicmFuY2gyID0gY2xvbmVBU1RFbGVtZW50KGVsKTsKICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gyLCAndi1mb3InLCB0cnVlKTsKICAgICAgYWRkUmF3QXR0cihicmFuY2gyLCAnOnR5cGUnLCB0eXBlQmluZGluZyk7CiAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDIsIG9wdGlvbnMpOwogICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7CiAgICAgICAgZXhwOiBpZkNvbmRpdGlvbiwKICAgICAgICBibG9jazogYnJhbmNoMgogICAgICB9KTsKCiAgICAgIGlmIChoYXNFbHNlKSB7CiAgICAgICAgYnJhbmNoMC5lbHNlID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChlbHNlSWZDb25kaXRpb24pIHsKICAgICAgICBicmFuY2gwLmVsc2VpZiA9IGVsc2VJZkNvbmRpdGlvbjsKICAgICAgfQoKICAgICAgcmV0dXJuIGJyYW5jaDA7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBjbG9uZUFTVEVsZW1lbnQoZWwpIHsKICByZXR1cm4gY3JlYXRlQVNURWxlbWVudChlbC50YWcsIGVsLmF0dHJzTGlzdC5zbGljZSgpLCBlbC5wYXJlbnQpOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJlVHJhbnNmb3JtTm9kZTogcHJlVHJhbnNmb3JtTm9kZQp9Ow=="},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/platforms/web/compiler/modules/model.js"],"names":["addRawAttr","getBindingAttr","getAndRemoveAttr","processFor","processElement","addIfCondition","createASTElement","preTransformNode","el","options","tag","map","attrsMap","typeBinding","type","ifCondition","ifConditionExtra","hasElse","elseIfCondition","branch0","cloneASTElement","processed","if","exp","block","branch1","branch2","else","elseif","attrsList","slice","parent"],"mappings":"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","sourcesContent":["/*       */\n\n/**\n * Expand input[v-model] with dyanmic type bindings into v-if-else chains\n * Turn this:\n *   <input v-model=\"data[type]\" :type=\"type\">\n * into this:\n *   <input v-if=\"type === 'checkbox'\" type=\"checkbox\" v-model=\"data[type]\">\n *   <input v-else-if=\"type === 'radio'\" type=\"radio\" v-model=\"data[type]\">\n *   <input v-else :type=\"type\" v-model=\"data[type]\">\n */\n\nimport {\n  addRawAttr,\n  getBindingAttr,\n  getAndRemoveAttr\n} from '../../../../compiler/helpers'\n\nimport {\n  processFor,\n  processElement,\n  addIfCondition,\n  createASTElement\n} from '../../../../compiler/parser/index'\n\nfunction preTransformNode(el, options) {\n  if (el.tag === 'input') {\n    const map = el.attrsMap\n    if (!map['v-model']) {\n      return\n    }\n\n    let typeBinding\n    if (map[':type'] || map['v-bind:type']) {\n      typeBinding = getBindingAttr(el, 'type')\n    }\n    if (!map.type && !typeBinding && map['v-bind']) {\n      typeBinding = `(${map['v-bind']}).type`\n    }\n\n    if (typeBinding) {\n      const ifCondition = getAndRemoveAttr(el, 'v-if', true)\n      const ifConditionExtra = ifCondition ? `&&(${ifCondition})` : ``\n      const hasElse = getAndRemoveAttr(el, 'v-else', true) != null\n      const elseIfCondition = getAndRemoveAttr(el, 'v-else-if', true)\n      // 1. checkbox\n      const branch0 = cloneASTElement(el)\n      // process for on the main node\n      processFor(branch0)\n      addRawAttr(branch0, 'type', 'checkbox')\n      processElement(branch0, options)\n      branch0.processed = true // prevent it from double-processed\n      branch0.if = `(${typeBinding})==='checkbox'` + ifConditionExtra\n      addIfCondition(branch0, {\n        exp: branch0.if,\n        block: branch0\n      })\n      // 2. add radio else-if condition\n      const branch1 = cloneASTElement(el)\n      getAndRemoveAttr(branch1, 'v-for', true)\n      addRawAttr(branch1, 'type', 'radio')\n      processElement(branch1, options)\n      addIfCondition(branch0, {\n        exp: `(${typeBinding})==='radio'` + ifConditionExtra,\n        block: branch1\n      })\n      // 3. other\n      const branch2 = cloneASTElement(el)\n      getAndRemoveAttr(branch2, 'v-for', true)\n      addRawAttr(branch2, ':type', typeBinding)\n      processElement(branch2, options)\n      addIfCondition(branch0, {\n        exp: ifCondition,\n        block: branch2\n      })\n\n      if (hasElse) {\n        branch0.else = true\n      } else if (elseIfCondition) {\n        branch0.elseif = elseIfCondition\n      }\n\n      return branch0\n    }\n  }\n}\n\nfunction cloneASTElement(el) {\n  return createASTElement(el.tag, el.attrsList.slice(), el.parent)\n}\n\nexport default {\n  preTransformNode\n}\n"]}]}