{"remainingRequest":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js!/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/helpers/resolve-async-component.js","dependencies":[{"path":"/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/helpers/resolve-async-component.js","mtime":1596452256000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tech/workspace/demo/vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLnRvLXN0cmluZy10YWciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnRvLXN0cmluZy10YWciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnRvLXN0cmluZy10YWciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKCi8qICAgICAgICovCmltcG9ydCB7IHdhcm4sIG9uY2UsIGlzRGVmLCBpc1VuZGVmLCBpc1RydWUsIGlzT2JqZWN0LCBoYXNTeW1ib2wsIGlzUHJvbWlzZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvdXRpbC9pbmRleCc7CmltcG9ydCB7IGNyZWF0ZUVtcHR5Vk5vZGUgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3Zkb20vdm5vZGUnOwoKZnVuY3Rpb24gZW5zdXJlQ3Rvcihjb21wLCBiYXNlKSB7CiAgaWYgKGNvbXAuX19lc01vZHVsZSB8fCBoYXNTeW1ib2wgJiYgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTW9kdWxlJykgewogICAgY29tcCA9IGNvbXAuZGVmYXVsdDsKICB9CgogIHJldHVybiBpc09iamVjdChjb21wKSA/IGJhc2UuZXh0ZW5kKGNvbXApIDogY29tcDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIoZmFjdG9yeSwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4sIHRhZykgewogIHZhciBub2RlID0gY3JlYXRlRW1wdHlWTm9kZSgpOwogIG5vZGUuYXN5bmNGYWN0b3J5ID0gZmFjdG9yeTsKICBub2RlLmFzeW5jTWV0YSA9IHsKICAgIGRhdGE6IGRhdGEsCiAgICBjb250ZXh0OiBjb250ZXh0LAogICAgY2hpbGRyZW46IGNoaWxkcmVuLAogICAgdGFnOiB0YWcKICB9OwogIHJldHVybiBub2RlOwp9CmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnQoZmFjdG9yeSwgYmFzZUN0b3IsIGNvbnRleHQpIHsKICBpZiAoaXNUcnVlKGZhY3RvcnkuZXJyb3IpICYmIGlzRGVmKGZhY3RvcnkuZXJyb3JDb21wKSkgewogICAgcmV0dXJuIGZhY3RvcnkuZXJyb3JDb21wOwogIH0KCiAgaWYgKGlzRGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7CiAgICByZXR1cm4gZmFjdG9yeS5yZXNvbHZlZDsKICB9CgogIGlmIChpc1RydWUoZmFjdG9yeS5sb2FkaW5nKSAmJiBpc0RlZihmYWN0b3J5LmxvYWRpbmdDb21wKSkgewogICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ0NvbXA7CiAgfQoKICBpZiAoaXNEZWYoZmFjdG9yeS5jb250ZXh0cykpIHsKICAgIC8vIGFscmVhZHkgcGVuZGluZwogICAgZmFjdG9yeS5jb250ZXh0cy5wdXNoKGNvbnRleHQpOwogIH0gZWxzZSB7CiAgICB2YXIgY29udGV4dHMgPSBmYWN0b3J5LmNvbnRleHRzID0gW2NvbnRleHRdOwogICAgdmFyIHN5bmMgPSB0cnVlOwoKICAgIHZhciBmb3JjZVJlbmRlciA9IGZ1bmN0aW9uIGZvcmNlUmVuZGVyKHJlbmRlckNvbXBsZXRlZCkgewogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRleHRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnRleHRzW2ldLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9CgogICAgICBpZiAocmVuZGVyQ29tcGxldGVkKSB7CiAgICAgICAgY29udGV4dHMubGVuZ3RoID0gMDsKICAgICAgfQogICAgfTsKCiAgICB2YXIgcmVzb2x2ZSA9IG9uY2UoZnVuY3Rpb24gKHJlcykgewogICAgICAvLyBjYWNoZSByZXNvbHZlZAogICAgICBmYWN0b3J5LnJlc29sdmVkID0gZW5zdXJlQ3RvcihyZXMsIGJhc2VDdG9yKTsgLy8gaW52b2tlIGNhbGxiYWNrcyBvbmx5IGlmIHRoaXMgaXMgbm90IGEgc3luY2hyb25vdXMgcmVzb2x2ZQogICAgICAvLyAoYXN5bmMgcmVzb2x2ZXMgYXJlIHNoaW1tZWQgYXMgc3luY2hyb25vdXMgZHVyaW5nIFNTUikKCiAgICAgIGlmICghc3luYykgewogICAgICAgIGZvcmNlUmVuZGVyKHRydWUpOwogICAgICB9CiAgICB9KTsKICAgIHZhciByZWplY3QgPSBvbmNlKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQ6ICIuY29uY2F0KFN0cmluZyhmYWN0b3J5KSkgKyAocmVhc29uID8gIlxuUmVhc29uOiAiLmNvbmNhdChyZWFzb24pIDogJycpKTsKCiAgICAgIGlmIChpc0RlZihmYWN0b3J5LmVycm9yQ29tcCkpIHsKICAgICAgICBmYWN0b3J5LmVycm9yID0gdHJ1ZTsKICAgICAgICBmb3JjZVJlbmRlcih0cnVlKTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgcmVzID0gZmFjdG9yeShyZXNvbHZlLCByZWplY3QpOwoKICAgIGlmIChpc09iamVjdChyZXMpKSB7CiAgICAgIGlmIChpc1Byb21pc2UocmVzKSkgewogICAgICAgIC8vICgpID0+IFByb21pc2UKICAgICAgICBpZiAoaXNVbmRlZihmYWN0b3J5LnJlc29sdmVkKSkgewogICAgICAgICAgcmVzLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcy5jb21wb25lbnQpKSB7CiAgICAgICAgcmVzLmNvbXBvbmVudC50aGVuKHJlc29sdmUsIHJlamVjdCk7CgogICAgICAgIGlmIChpc0RlZihyZXMuZXJyb3IpKSB7CiAgICAgICAgICBmYWN0b3J5LmVycm9yQ29tcCA9IGVuc3VyZUN0b3IocmVzLmVycm9yLCBiYXNlQ3Rvcik7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7CiAgICAgICAgICBmYWN0b3J5LmxvYWRpbmdDb21wID0gZW5zdXJlQ3RvcihyZXMubG9hZGluZywgYmFzZUN0b3IpOwoKICAgICAgICAgIGlmIChyZXMuZGVsYXkgPT09IDApIHsKICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpICYmIGlzVW5kZWYoZmFjdG9yeS5lcnJvcikpIHsKICAgICAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3JjZVJlbmRlcihmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCByZXMuZGVsYXkgfHwgMjAwKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChpc0RlZihyZXMudGltZW91dCkpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoaXNVbmRlZihmYWN0b3J5LnJlc29sdmVkKSkgewogICAgICAgICAgICAgIHJlamVjdChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gInRpbWVvdXQgKCIuY29uY2F0KHJlcy50aW1lb3V0LCAibXMpIikgOiBudWxsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgcmVzLnRpbWVvdXQpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHN5bmMgPSBmYWxzZTsgLy8gcmV0dXJuIGluIGNhc2UgcmVzb2x2ZWQgc3luY2hyb25vdXNseQoKICAgIHJldHVybiBmYWN0b3J5LmxvYWRpbmcgPyBmYWN0b3J5LmxvYWRpbmdDb21wIDogZmFjdG9yeS5yZXNvbHZlZDsKICB9Cn0="},{"version":3,"sources":["/Users/tech/workspace/demo/vue-demo/src/vueResource/core/vdom/helpers/resolve-async-component.js"],"names":["warn","once","isDef","isUndef","isTrue","isObject","hasSymbol","isPromise","createEmptyVNode","ensureCtor","comp","base","__esModule","Symbol","toStringTag","default","extend","createAsyncPlaceholder","factory","data","context","children","tag","node","asyncFactory","asyncMeta","resolveAsyncComponent","baseCtor","error","errorComp","resolved","loading","loadingComp","contexts","push","sync","forceRender","renderCompleted","i","l","length","$forceUpdate","resolve","res","reject","reason","process","env","NODE_ENV","String","then","component","delay","setTimeout","timeout"],"mappings":"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","sourcesContent":["/*       */\n\nimport {\n  warn,\n  once,\n  isDef,\n  isUndef,\n  isTrue,\n  isObject,\n  hasSymbol,\n  isPromise\n} from '../../../core/util/index'\n\nimport {createEmptyVNode} from '../../../core/vdom/vnode'\n\nfunction ensureCtor(comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nexport function createAsyncPlaceholder(\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  const node = createEmptyVNode()\n  node.asyncFactory = factory\n  node.asyncMeta = {data, context, children, tag}\n  return node\n}\n\nexport function resolveAsyncComponent(\n  factory,\n  baseCtor,\n  context\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (isDef(factory.contexts)) {\n    // already pending\n    factory.contexts.push(context)\n  } else {\n    const contexts = factory.contexts = [context]\n    let sync = true\n\n    const forceRender = (renderCompleted) => {\n      for (let i = 0, l = contexts.length; i < l; i++) {\n        contexts[i].$forceUpdate()\n      }\n\n      if (renderCompleted) {\n        contexts.length = 0\n      }\n    }\n\n    const resolve = once((res) => {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor)\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true)\n      }\n    })\n\n    const reject = once(reason => {\n      process.env.NODE_ENV !== 'production' && warn(\n        `Failed to resolve async component: ${String(factory)}` +\n        (reason ? `\\nReason: ${reason}` : '')\n      )\n      if (isDef(factory.errorComp)) {\n        factory.error = true\n        forceRender(true)\n      }\n    })\n\n    const res = factory(resolve, reject)\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject)\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject)\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor)\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor)\n          if (res.delay === 0) {\n            factory.loading = true\n          } else {\n            setTimeout(() => {\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true\n                forceRender(false)\n              }\n            }, res.delay || 200)\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          setTimeout(() => {\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? `timeout (${res.timeout}ms)`\n                  : null\n              )\n            }\n          }, res.timeout)\n        }\n      }\n    }\n\n    sync = false\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n"]}]}